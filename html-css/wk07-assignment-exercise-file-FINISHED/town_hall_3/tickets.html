<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>San Joaquin Valley Town Hall</title>
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="stylesheet" href="styles/normalize.css">
	<link rel="stylesheet" href="styles/tickets.css">
	<script>
	
	window.rInterval=function(a,b){var c=Date.now,d=window.requestAnimationFrame,e=c(),f,g=function(){c()-e<b||(e+=b,a());f||d(g)};d(g);return{clear:function(){f=1}}};
window.rtimeOut=function(a,b){var c=Date.now,d=window.requestAnimationFrame,e=c(),f,g=function(){c()-e<b?f||d(g):a()};d(g);return{clear:function(){f=1}}};


	var interval1,timeout1;
window.onload=function(){
 interval1=window.rInterval(function(){removeResets()},10000);
 timeout1=window.rtimeOut(function(){console.log('timeout1')},5000);
}

function removeResets() {
element = document.querySelectorAll('input');
	for (i = 0; i < element.length; i++ ) {
		if (element[i].classList.contains("reset")) {
			element[i].classList.remove("reset");
		}
	}
}
function addResets() {
	element = document.querySelectorAll('input');
	for (i = 0; i < element.length; i++ ) {
	 element[i].classList.add("reset");
	}
	
}

</script>
</head>

<body>
	<header>
		<img src="images/town_hall_logo.gif" alt="Town Hall logo" height="80">
		<h2>San Joaquin Valley Town Hall</h2>
		<h3>Celebrating our <span class="shadow">75<sup>th</sup></span> Year</h3>
	</header>
	<nav id="nav_menu">
    	<ul>
        	<li><a href="index.html" class="current">Home</a></li>
        	<li><a href="speakers.html">Speakers</a></li>
        	<li><a href="luncheons.html">Luncheons</a></li>
        	<li><a href="tickets.html">Tickets</a></li>
        	<li><a href="aboutus.html">About Us</a>
            	<ul>
                	<li><a href="#">Our History</a></li>
                	<li><a href="#">Board of Directors</a></li>
                	<li><a href="#">Past Speakers</a></li>
                	<li><a href="#">Contact Information</a></li>
            	</ul>
        	</li>
    	</ul>
	</nav>
	<main>
		<section>
			<h1>Order Form</h1>
				<div id="event-information">
					<div class="speaker-title"></div>
					<h2 class="date"></h2>
					<h3 class="speaker"></h2>
				</div>

    		<form action="register_account.html" method="get"
				name="ticket-order-form" id="ticket-order-form">
				<input type="hidden" id="ticket-order" name="ticket-order">
				<input type="hidden" id="location" name="location">
    			<fieldset>
        			<legend>Member Information</legend>
        			<label for="first_name">First Name:</label>
					<input type="text" name="first_name" id="first_name" required><br>
					<label for="last_name">Last Name:</label>
					<input type="text" name="last_name" id="last_name" required><br>
					<label for="address" >Address:</label>
					<input type="text" name="address" id="address" required><br>
					<label for="city">City:</label>
					<input type="text" name="city" id="city" required><br>
					<label for="state">State:</label>
					<input type="text" name="state" id="state" required maxlength="2" placeholder="2-character code"><br>
					<label for="zip">ZIP Code:</label>
					<input type="text" name="zip" id="zip" required placeholder="5 or 9 digits" 
				           pattern="^\d{5}(-\d{4})?$" title="Either 5 or 9 digits"><br>
					<label for="phone">Phone Number:</label>
					<input type="tel" name="phone" id="phone" placeholder="999-999-9999" 
				       	   pattern="\d{3}[\-]\d{3}[\-]\d{4}" title="Must be 999-999-999 format"><br>
				</fieldset>
				<fieldset>
        			<legend>Ordering Information</legend>
        				<label for="order-type">Order Type:</label>
					<select name="order-type" id="order-type" required>
				    	<option value="order-type-member-package">Member Package</option>
				    	<option value="order-type-donor-package">Donor Package</option>            
				    	<option value="order-type-single-tickts">Single Tickets</option>
					</select><br>
        			<label for="number-of-tickets">Number of Tickets</label>
					<input type="text" name="number-of-tickets" id="number-of-tickets" required placeholder="Number of Single Tickets"><br>
				</fieldset>
				<fieldset id="payment-methods">
				<legend >Payment Method</legend>
					<input type="radio" name="payment-method" id="bill-me" value="bill-me">
        				<label for="bill-me">Bill Me</label>
					<input type="radio" name="payment-method" id="credit-card" value="credit-card">
        				<label for="credit-card">Credit Card</label><br>
				</fieldset>
				<fieldset id="credit-card-information">
        			<legend>Credit Card Information</legend>
        				<label for="card-type">Card Type:</label>
					<select name="card-type" id="card-type" >
				    	<option value="card-type-visa">Visa</option>
				    	<option value="card-type-master-card">Master Card</option>            
				    	<option value="card-type-discover">Discover</option>
					</select><br>
        			<label for="card-number">Card Number</label>
					<input type="text" name="card-number" id="card-number"  placeholder="XXXX-XXXX-XXXX-XXXX" pattern="\d{4}[\-]\d{4}[\-]\d{4}[\-]\d{4}"><br>
					<label for="expiration-date">Expiration Date</label>
					<select name="expiration-date" id="expiration-date-month" >
						<option value="expiration-date-january">January</option>
						<option value="expiration-date-february">February</option>
						<option value="expiration-date-march">March</option>
						<option value="expiration-date-april">April</option>
						<option value="expiration-date-may">May</option>
						<option value="expiration-date-june">June</option>
						<option value="expiration-date-july">July</option>
						<option value="expiration-date-august">August</option>
						<option value="expiration-date-september">September</option>
						<option value="expiration-date-october">October</option>
						<option value="expiration-date-november">November</option>
						<option value="expiration-date-december">December</option>
					</select>
					<select name="expiration-date" id="expiration-date-year" >
						<option value="expiration-date-2017">2017</option>
						<option value="expiration-date-2018">2018</option>
						<option value="expiration-date-2019">2019</option>
						<option value="expiration-date-2020">2020</option>
						<option value="expiration-date-2021">2021</option>
					</select>

				</fieldset>
				<fieldset id="buttons">
					<legend>Submit Your Order</legend>
					<label>&nbsp;</label>
					<input type="submit" id="submit" value="Submit">
					<input type="reset" id="reset" value="Reset Fields" onclick="addResets()"><br>
				</fieldset>
			</form>
		</section>
		<aside>
			<h2>Guest speakers</h2>
			<h3>October<br><a href="speakers/toobin.html">Jeffrey Toobin</a></h3>
			<img src="images/toobin75.jpg" alt="Jeffrey Toobin photo">
			<h3>November<br><a href="speakers/sorkin.html">Andrew Ross Sorkin</a></h3>
			<img src="images/sorkin75.jpg" alt="Andrew Ross Sorkin photo">
			<h3>January<br><a href="speakers/chua.html">Amy Chua</a></h3>
			<img src="images/chua75.jpg" alt="Amy Chua photo">
			<h3>February<br><a href="speakers/c7_sampson.html">Scott Sampson</a></h3>
			<img src="images/sampson75.jpg" alt="Scott Sampson photo">
			<h3>March<br><a href="#">COVID-19 Cancellation</a></h3>
			<svg><rect class="square" width="75" height="75" /></svg>

		</aside>
	</main>
	<footer>
		<p>&copy; 2018, San Joaquin Valley Town Hall, Fresno, CA 93755</p>
	</footer>
	<script>
		window.addEventListener("DOMContentLoaded", function(e) {
			let locationBox = document.querySelector("#location");

			let location = {
				latitude: "unknown",
				longitude: "unknown"
			};

			window.navigator.geolocation.getCurrentPosition(
				function(position) {
					location = {
						latitude: position.coords.latitude,
						longitude: position.coords.longitude
					};
					locationBox.value = JSON.stringify(location);

				},
				function(error) {
					console.log("Location error or user chose not to share location");

				}
			);
			const ticketOrder = localStorage.getItem("order");

			if (ticketOrder) {
				const order = JSON.parse(ticketOrder);

				const orderInput = document.querySelector("#ticket-order");
				orderInput.value = ticketOrder;

				const event = document.querySelector("#event-information");
				
				const title = event.querySelector(".speaker-title");
				const date = event.querySelector(".date");
				const speaker = event.querySelector(".speaker");

				title.innerText = order.title;
				date.innerText = order.date;
				speaker.innerText = order.speaker;
				


			}


		});
	</script>
</body>
</html>
